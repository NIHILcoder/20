# Инструкция по добавлению столбца credits в таблицу users

## Проблема

В приложении возникает ошибка:
```
Детали ошибки: столбец "credits" не существует
```

Это происходит потому, что в таблице `users` отсутствует столбец `credits`, который используется в коде приложения.

## Решение

### Вариант 1: Выполнение SQL-запроса через инструмент управления базой данных

1. Откройте ваш инструмент для работы с PostgreSQL (pgAdmin, DBeaver, psql и т.д.)
2. Подключитесь к вашей базе данных с использованием учетных данных из файла `.env` или `config/database.js`
3. Выполните следующий SQL-запрос:

```sql
DO $$
BEGIN
    IF NOT EXISTS (
        SELECT 1 
        FROM information_schema.columns 
        WHERE table_name = 'users' AND column_name = 'credits'
    ) THEN
        -- Добавляем столбец credits с значением по умолчанию 1000
        ALTER TABLE users ADD COLUMN credits INTEGER DEFAULT 1000;
        
        -- Обновляем существующие записи, устанавливая значение credits = 1000
        UPDATE users SET credits = 1000 WHERE credits IS NULL;
        
        RAISE NOTICE 'Столбец credits успешно добавлен в таблицу users';
    ELSE
        RAISE NOTICE 'Столбец credits уже существует в таблице users';
    END IF;
END
$$;
```

### Вариант 2: Использование готового SQL-файла

В директории `db` создан файл `add_credits_column.sql` с необходимым SQL-запросом. Вы можете выполнить его через командную строку:

```bash
psql -U postgre -d visiomera -f db/add_credits_column.sql
```

Замените `ваш_пользователь` и `имя_базы_данных` на соответствующие значения из вашей конфигурации.

## Проверка

После выполнения SQL-запроса, перезапустите приложение и проверьте, что ошибка больше не возникает.

## Примечание

Столбец `credits` уже добавлен в схему базы данных (`db/schema.sql`), поэтому при следующей инициализации базы данных он будет создан автоматически.